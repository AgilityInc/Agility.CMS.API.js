"use strict";"undefined"==typeof window.Agility&&console.warn("Agility.js dependency is missing"),Agility.RegisterNamespace("Agility.CMS.API"),function(e){function t(t){return null!=e.APIUrl&&""!=e.APIUrl&&void 0!=e.APIWebsiteName||(t({IsError:!0,Message:"The Agility CMS API has not been initialized.",ResponseData:null}),!1)}function n(t,n){var i=e.APIUrl;if(""==i||null==i)return null;i.lastIndexOf("/")!=i.length-1&&(i+="/"),i+=t+"?callback=?&website="+escape(e.APIWebsiteName);for(var r in n)i+="&"+r+"="+escape(n[r]);return i}function i(e,t,n){var i=Agility.UniqueID("postDataForm"),r=i+"_form",a=i+"_iframe",o=location.href;o=o.substring(0,o.indexOf("/",o.indexOf("//")+2)),o+=Agility.ResolveUrl("~/AgilityRedirector.htm");var l=Agility.ResolveUrl("~/AgilityRedirector.htm");e=e.replace("?callback=?","?returnurl="+escape(o));var s='<div id="'+i+"\" style='display:none'><form id=\""+r+'" method="post" action="'+e+'" target="'+a+'">';if("string"==typeof t)s+='<input type="text" name="postdata" />';else for(prop in t)s+='<input type="text" name="'+prop+'" />';s+='<input type="text" name="url" />',s+="</form>",s+='<iframe id="'+a+'" name="'+a+'" src="'+l+'"></iframe>',s+="</div>";var u=jQuery(document.body);jQuery(u).append(s);var f=jQuery("#"+i),p=jQuery("#"+r),y=jQuery("#"+a);if("string"==typeof t)$("input[name=postdata]",p).val(t);else for(prop in t)$("input[name="+prop+"]",p).val(t[prop]);jQuery(y).load(function(){var e=window.frames[a],t=!0,i=e.location;if(null!=i){var r=i.href,o=Agility.QueryString("IsError",r);null==o&&(o="true"),t="true"==o.toLowerCase()}var l={IsError:t,Message:Agility.QueryString("Message",r),ResponseData:Agility.QueryString("ResponseData",r)};setTimeout(function(){n(l)},0),setTimeout(function(){f.empty()},0)}),p.submit()}e.EMPTY_GUID="00000000-0000-0000-0000-000000000000",e.Initialized=!1,e.APIUrl="",e.OnInit=function(t,n){void 0!=t&&null!=t&&(e.APIUrl=t),e.APIWebsiteName=n,e.Initialized=!0},e.SelectContentItems=function(e,i,r){if(t(r)){e.hash=i;var a=n("SelectContentItems",e);jQuery.getJSON(a,r)}},e.GetContentItem=function(e,i,r){if(t(r)){e.hash=i;var a=n("GetContentItem",e);jQuery.getJSON(a,r)}},e.RequestApproval=function(e,i,r){if(t(r)){e.hash=i;var a=n("RequestApproval",e);jQuery.getJSON(a,r)}},e.GetThumbnailRootUrl=function(e,i){if(t(i)){var r={hash:e},a=n("GetThumbnailRootUrl",r);jQuery.getJSON(a,i)}},e.PublishContent=function(e,i,r){if(t(r)){e.hash=i;var a=n("PublishContent",e);jQuery.getJSON(a,r)}},e.DeleteContent=function(e,i,r){if(t(r)){e.hash=i;var a=n("DeleteContent",e);jQuery.getJSON(a,r)}},e.SaveContentItem=function(e,r,a,o,l){if(t(l)){var s=Agility.JSON.encode(r),u=null;null!=a&&a.length>0&&(u=Agility.JSON.encode(a)),e.hash=o;var f=n("SaveContentItem",e);i(f,{contentItem:s,attachments:u},l)}}}(Agility.CMS.API);